name: "Loop Output Action"
description: "Runs a Bash loop, encodes output, and exports it"

outputs: 
  ENCODED_OUTPUT:
    description: none
    value: ${{ steps.cr.outputs.JSON_RESPONSE }}

runs:
  using: "composite"
  steps:
    - name: Run Bash Loop and Encode Output
      shell: bash
      id: cr
      run: |
        #!/bin/bash
        for i in 1 2 3 4 5
        do
          echo "Welcome $i times"      >> file
          echo "=======  $i =========" >> file
          cat << EOF >> file
          $i
          Message:               Failed to install after 1 attempt(s)
          Message:               Helm install failed for release default/nginx-helm with chart nginx@13.2.19: context deadline exceeded
          Message:               Helm install failed for release default/nginx-helm with chart nginx@13.2.19: context deadline exceeded 
          EOF
        done
        echo "JSON_RESPONSE=$(cat file)" >> "$GITHUB_OUTPUT"

        